(()=>{"use strict";const t=function(){function t(t,e,n,o){void 0===e&&(e="div"),void 0===n&&(n=""),void 0===o&&(o="");var r=document.createElement(e);r.className=n,r.innerHTML=o,t&&t.append(r),this.node=r}return t.prototype.destroy=function(){this.node.remove()},t}();var e,n=(e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},e(t,n)},function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)});const o=function(e){function o(n){var o=e.call(this,n,"main","main")||this,r=new t(o.node,"section","hero"),a=new t(r.node,"hero","wrap");new t(a.node,"h1","main_heading","RSLang"),new t(a.node,"p","hero_text","RS Lang – приложение для изучения иностранных слов, включающее электронный учебник с базой слов для изучения, мини-игры для их повторения, страницу статистики для отслеживания индивидуального прогресса."),o.bgGold=new t(a.node,"button",'"btn bg_gold',"Учить слова");var i=new t(o.node,"div","container1"),s=new t(i.node,"section","skills"),c=new t(s.node,"div","heading_wrap"),u=(new t(c.node,"h2","heading","Возможности приложения"),new t(s.node,"div","flex_container")),d=new t(u.node,"div","flex_item"),l=(new t(d.node,"div","img_item-textbook"),new t(d.node,"h3","header_item","Учебник"),new t(d.node,"p","discription_item","Изучайте новые слова в учебнике"),new t(u.node,"div","flex_item")),h=(new t(l.node,"div","img_item-games"),new t(l.node,"h3","header_item","Игры"),new t(l.node,"p","discription_item","Учите слова по играм Аудиовызов и Спринт"),new t(u.node,"div","flex_item")),p=(new t(h.node,"div","img_item-statistic"),new t(h.node,"h3","header_item","Статистика"),new t(h.node,"p","discription_item","Получите доступ к статистике"),new t(o.node,"div","container2")),f=new t(p.node,"div","price"),w=new t(f.node,"div","heading_wrap"),g=(new t(w.node,"h2","heading","Разработчики"),new t(f.node,"div","flex_container_price")),v=new t(g.node,"div","price_item"),m=(new t(v.node,"div","img_dev-teamLead"),new t(v.node,"h3","","Кирилл"),new t(v.node,"p","","Тимлид, бэкэнд"),new t(v.node,"a"));m.node.setAttribute("href","https://github.com/JiRad71"),m.node.setAttribute("target","_blank"),new t(m.node,"button","bg_gold btn","GitHub");var y=new t(g.node,"div","price_item"),b=(new t(y.node,"div","img_dev-coding"),new t(y.node,"h3","","Артём"),new t(y.node,"p","","Спринт, статистика"),new t(y.node,"a"));b.node.setAttribute("href","https://github.com/RTinIT"),b.node.setAttribute("target","_blank"),new t(b.node,"button","bg_gold btn","GitHub");var _=new t(g.node,"div","price_item"),A=(new t(_.node,"div","img_dev-layouts"),new t(_.node,"h3","","Алексей"),new t(_.node,"p","","Аудиовызов, вёрстка"),new t(_.node,"a"));return A.node.setAttribute("href","https://github.com/AlexKul84"),A.node.setAttribute("target","_blank"),new t(A.node,"button","bg_gold btn","GitHub"),o}return n(o,e),o}(t);var r;!function(t){t.url="https://rss-lang-backends.herokuapp.com/words/",t.shortUrl="https://rss-lang-backends.herokuapp.com/",t.page="&page=",t.group="?group=",t.signin="signin",t.login="users",t.words="words",t.stat="statistics",t.aggregatedWords="aggregatedWords",t.wordPerPage="wordsPerPage=20",t.filter="filter=",t.settings="settings"}(r||(r={}));var a=function(t,e,n,o){return new(n||(n=Promise))((function(r,a){function i(t){try{c(o.next(t))}catch(t){a(t)}}function s(t){try{c(o.throw(t))}catch(t){a(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(i,s)}c((o=o.apply(t,e||[])).next())}))},i=function(t,e){var n,o,r,a,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,o&&(r=2&a[0]?o.return:a[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,a[1])).done)return r;switch(o=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,o=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((r=(r=i.trys).length>0&&r[r.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){i.label=a[1];break}if(6===a[0]&&i.label<r[1]){i.label=r[1],r=a;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(a);break}r[2]&&i.ops.pop(),i.trys.pop();continue}a=e.call(t,i)}catch(t){a=[6,t],o=0}finally{n=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},s=function(){function t(){}return t.prototype.getWord=function(t){return a(this,void 0,void 0,(function(){return i(this,(function(e){switch(e.label){case 0:return[4,fetch(t)];case 1:return[2,e.sent().json()]}}))}))},t.prototype.checkUser=function(t,e){window.localStorage.getItem("token")&&fetch("".concat(r.shortUrl).concat(r.login,"/").concat(window.localStorage.getItem("usersId")),{headers:{Authorization:"Bearer ".concat(window.localStorage.getItem("token")),Accept:"application/json","Content-Type":"application/json"}}).then((function(t){return t.json()})).then((function(t){return t})).then((function(n){t.node.classList.add("hidden"),e.node.textContent="".concat(n.email),"#textbook"===location.hash?e.node.classList.add("hidden"):e.node.classList.remove("hidden"),e.node.onclick=function(){e.node.textContent="",e.node.classList.add("hidden"),t.node.classList.remove("hidden"),window.localStorage.removeItem("usersId"),window.localStorage.removeItem("token")}})).catch((function(){return console.log("Вы не зарегистрированы")}))},t.prototype.getUser=function(){return a(this,void 0,void 0,(function(){return i(this,(function(t){switch(t.label){case 0:return[4,fetch("".concat(r.shortUrl).concat(r.login,"/").concat(window.localStorage.getItem("usersId")),{headers:{Authorization:"Bearer ".concat(window.localStorage.getItem("token")),Accept:"application/json","Content-Type":"application/json"}})];case 1:return[2,t.sent().json()]}}))}))},t.prototype.addOrGetUser=function(t,e){return a(this,void 0,void 0,(function(){return i(this,(function(n){switch(n.label){case 0:return[4,fetch(e,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(t)})];case 1:return[2,n.sent()]}}))}))},t.prototype.createUserWord=function(t,e,n){return a(this,void 0,void 0,(function(){return i(this,(function(o){switch(o.label){case 0:return[4,fetch("".concat(r.shortUrl).concat(r.login,"/").concat(localStorage.getItem("usersId"),"/").concat(r.words,"/").concat(t),{method:n,headers:{Authorization:"Bearer ".concat(window.localStorage.getItem("token")),Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(e)})];case 1:return[2,o.sent().json()]}}))}))},t.prototype.createUserWordCastom=function(t,e,n){return a(this,void 0,void 0,(function(){return i(this,(function(o){switch(o.label){case 0:return[4,fetch("".concat(r.shortUrl).concat(r.login,"/").concat(localStorage.getItem("usersId"),"/").concat(r.words,"/").concat(t),{method:n,headers:{Authorization:"Bearer ".concat(window.localStorage.getItem("token")),Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(e)})];case 1:return[2,o.sent().json()]}}))}))},t.prototype.aggregatedUserWords=function(t){return a(this,void 0,void 0,(function(){return i(this,(function(e){switch(e.label){case 0:return[4,fetch("".concat(r.shortUrl).concat(r.login,"/").concat(localStorage.getItem("usersId"),"/").concat(r.aggregatedWords,"?").concat(r.filter).concat(encodeURIComponent(t)),{headers:{Authorization:"Bearer ".concat(window.localStorage.getItem("token")),Accept:"application/json","Content-Type":"application/json"}})];case 1:return[2,e.sent().json()]}}))}))},t.prototype.aggregatedWords=function(t,e){return a(this,void 0,void 0,(function(){return i(this,(function(n){switch(n.label){case 0:return[4,fetch("".concat(r.shortUrl).concat(r.login,"/").concat(localStorage.getItem("usersId"),"/").concat(r.aggregatedWords,"?").concat(r.page).concat(t,"&").concat(r.wordPerPage,"&").concat(r.filter).concat(encodeURIComponent(e)),{headers:{Authorization:"Bearer ".concat(window.localStorage.getItem("token")),Accept:"application/json","Content-Type":"application/json"}})];case 1:return[2,n.sent().json()]}}))}))},t.prototype.aggregatedAllWords=function(t,e,n){return a(this,void 0,void 0,(function(){return i(this,(function(o){switch(o.label){case 0:return[4,fetch("".concat(r.shortUrl).concat(r.login,"/").concat(localStorage.getItem("usersId"),"/").concat(r.aggregatedWords).concat(r.group).concat(n,"&").concat(r.page).concat(t,"&").concat(r.wordPerPage,"&").concat(r.filter).concat(encodeURIComponent(e)),{headers:{Authorization:"Bearer ".concat(window.localStorage.getItem("token")),Accept:"application/json","Content-Type":"application/json"}})];case 1:return[2,o.sent().json()]}}))}))},t.prototype.getLearnedWord=function(){return a(this,void 0,void 0,(function(){return i(this,(function(t){switch(t.label){case 0:return[4,fetch("".concat(r.shortUrl).concat(r.login,"/").concat(localStorage.getItem("usersId"),"/").concat(r.stat),{headers:{Authorization:"Bearer ".concat(window.localStorage.getItem("token")),Accept:"application/json","Content-Type":"application/json"}})];case 1:return[2,t.sent().json()]}}))}))},t.prototype.putLearnedWord=function(t){return a(this,void 0,void 0,(function(){return i(this,(function(e){switch(e.label){case 0:return[4,fetch("".concat(r.shortUrl).concat(r.login,"/").concat(localStorage.getItem("usersId"),"/").concat(r.stat),{method:"PUT",headers:{Authorization:"Bearer ".concat(window.localStorage.getItem("token")),Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(t)})];case 1:return[2,e.sent().json()]}}))}))},t.prototype.deleteUserWord=function(t){return a(this,void 0,void 0,(function(){return i(this,(function(e){switch(e.label){case 0:return[4,fetch("".concat(r.shortUrl).concat(r.login,"/").concat(localStorage.getItem("usersId"),"/").concat(r.words,"/").concat(t),{method:"DELETE",headers:{Authorization:"Bearer ".concat(window.localStorage.getItem("token")),Accept:"application/json","Content-Type":"application/json"}})];case 1:return e.sent(),[2]}}))}))},t.prototype.getUserWordsData=function(){return a(this,void 0,void 0,(function(){return i(this,(function(t){switch(t.label){case 0:return[4,fetch("".concat(r.shortUrl).concat(r.login,"/").concat(localStorage.getItem("usersId"),"/").concat(r.words),{headers:{Authorization:"Bearer ".concat(window.localStorage.getItem("token")),Accept:"application/json","Content-Type":"application/json"}})];case 1:return[2,t.sent().json()]}}))}))},t.prototype.getUserWord=function(t){return a(this,void 0,void 0,(function(){return i(this,(function(e){switch(e.label){case 0:return[4,fetch("".concat(r.shortUrl).concat(r.login,"/").concat(localStorage.getItem("usersId"),"/").concat(r.words,"/").concat(t),{headers:{Authorization:"Bearer ".concat(window.localStorage.getItem("token")),Accept:"application/json","Content-Type":"application/json"}})];case 1:return[2,e.sent().json()]}}))}))},t.prototype.updateUserWords=function(t){return a(this,void 0,void 0,(function(){return i(this,(function(e){switch(e.label){case 0:return[4,fetch("".concat(r.shortUrl).concat(r.login,"/").concat(localStorage.getItem("usersId"),"/").concat(r.words),{method:"PUT",headers:{Authorization:"Bearer ".concat(window.localStorage.getItem("token")),Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(t)})];case 1:return[2,e.sent().json()]}}))}))},t.prototype.getStatistic=function(){return a(this,void 0,void 0,(function(){return i(this,(function(t){switch(t.label){case 0:return[4,fetch("".concat(r.shortUrl).concat(r.login,"/").concat(localStorage.getItem("usersId"),"/").concat(r.stat),{headers:{Authorization:"Bearer ".concat(window.localStorage.getItem("token")),Accept:"application/json","Content-Type":"application/json"}})];case 1:return[2,t.sent().json()]}}))}))},t.prototype.putStatistic=function(t){return a(this,void 0,void 0,(function(){return i(this,(function(e){switch(e.label){case 0:return[4,fetch("".concat(r.shortUrl).concat(r.login,"/").concat(localStorage.getItem("usersId"),"/").concat(r.stat),{method:"PUT",headers:{Authorization:"Bearer ".concat(window.localStorage.getItem("token")),Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(t)})];case 1:return[2,e.sent().json()]}}))}))},t.prototype.getWordPerDay=function(){return a(this,void 0,void 0,(function(){return i(this,(function(t){switch(t.label){case 0:return[4,fetch("".concat(r.shortUrl).concat(r.login,"/").concat(localStorage.getItem("usersId"),"/").concat(r.settings),{headers:{Authorization:"Bearer ".concat(window.localStorage.getItem("token")),Accept:"application/json","Content-Type":"application/json"}})];case 1:return[2,t.sent().json()]}}))}))},t.prototype.putWordPerDay=function(t){return a(this,void 0,void 0,(function(){return i(this,(function(e){switch(e.label){case 0:return[4,fetch("".concat(r.shortUrl).concat(r.login,"/").concat(localStorage.getItem("usersId"),"/").concat(r.settings),{method:"PUT",headers:{Authorization:"Bearer ".concat(window.localStorage.getItem("token")),Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(t)})];case 1:return[2,e.sent().json()]}}))}))},t}(),c=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const u=function(e){function n(n){var o=e.call(this,n,"header","header")||this;o.btnList=[];var r=new t(o.node,"div","wrapper");o.mainBtn=new t(r.node,"button","logo","RSLang"),o.mainBtn.node.setAttribute("id","main"),o.request=new s;var a=new t(r.node,"nav","navigation"),i=new t(a.node,"div","navigation-menu");o.textBookBtn=new t(i.node,"button","navigation-menu__item","Учебник"),o.textBookBtn.node.setAttribute("id","textbook"),o.audioCallBtn=new t(i.node,"button","navigation-menu__item","Аудиовызов"),o.audioCallBtn.node.setAttribute("id","audio-call"),o.sprintBtn=new t(i.node,"button","navigation-menu__item","Спринт"),o.sprintBtn.node.setAttribute("id","sprint"),o.btnsWrap=new t(r.node,"div","auth"),o.authorizationBtn=new t(o.btnsWrap.node,"button","navigation-menu__item","Bход | Регистрация"),o.authorizationBtn.node.setAttribute("id","authorization"),o.userMenu=new t(o.btnsWrap.node,"button","navigation-menu__items burger"),o.burgerWrapp=new t(o.userMenu.node,"div","burger-overlay hidden");var c=new t(o.burgerWrapp.node,"ul","burger-menu"),u=new t(c.node,"li","burger-menu__li"),d=(o.request.getUser().then((function(e){new t(u.node,"span","burger-menu__li","".concat(e.email))})),new t(c.node,"li","burger-menu__li"));o.statisticBtn=new t(d.node,"btn","burger-menu__li_btn","Статистика"),o.statisticBtn.node.setAttribute("id","statistic"),localStorage.getItem("token")||o.statisticBtn.node.classList.add("hidden");var l=new t(c.node,"li","burger-menu__li");return o.authUser=new t(l.node,"btn","burger-menu__li_btn","Выйти"),o.userMenu.node.onclick=function(){o.burgerWrapp.node.classList.toggle("hidden")},o.userMenu.node.classList.add("hidden"),o.authUser.node.setAttribute("title","Выйти"),o}return c(n,e),n.prototype.updateAuth=function(){localStorage.getItem("token")?this.authUser.node.classList.remove("hidden"):this.authUser.node.classList.add("hidden")},n}(t);var d=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const l=function(e){function n(n){var o=e.call(this,n,"footer","footer")||this,r=new t(o.node,"div","wrapper"),a=new t(r.node,"div","left"),i=new t(r.node,"div","right"),s=(new t(a.node,"span","left_footer_span","© 2022"),new t(i.node,"span","right_link"));return new t(s.node,"a","right_link").node.setAttribute("href","https://rs.school/index.html"),o}return d(n,e),n}(t);var h=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const p=function(e){function n(n,o){var r=e.call(this,n,"div","item")||this;r.request=new s,r.element=o;var a=new t(r.node,"div","item__img"),i=new t(a.node,"img");r.itemWordsTranslate=new t(r.node,"div","item__words-translate");var c=new t(r.itemWordsTranslate.node,"p","item__word");i.node.setAttribute("src","https://rss-lang-backends.herokuapp.com/".concat(o.image)),new t(c.node,"span","item__word-eng","".concat(o.word)),new t(c.node,"span","item__word-transcript","".concat(o.transcription)),new t(c.node,"span","item__separator","|"),new t(c.node,"span","item__word-translate","".concat(o.wordTranslate)),new t(c.node,"span","item__speaker").node.onclick=function(){new Audio("https://rss-lang-backends.herokuapp.com/".concat(o.audio)).play()};var u=new t(r.itemWordsTranslate.node,"p","item__explain");new t(u.node,"span","item__explain-eng","".concat(o.textMeaning)),new t(u.node,"span","item__explain-translate","".concat(o.textMeaningTranslate)),new t(u.node,"span","item__speaker").node.onclick=function(){new Audio("https://rss-lang-backends.herokuapp.com/".concat(o.audioMeaning)).play()};var d=new t(r.itemWordsTranslate.node,"p","item__example");return new t(d.node,"span","item__example-eng","".concat(o.textExample)),new t(d.node,"span","item__example-translate","".concat(o.textExampleTranslate)),new t(d.node,"span","item__speaker").node.onclick=function(){new Audio("https://rss-lang-backends.herokuapp.com/".concat(o.audioExample)).play()},r}return h(n,e),n.prototype.addButtons=function(e){var n=this,o=new t(this.itemWordsTranslate.node,"div","item__buttons");e&&(new t(o.node,"button","difficult","Сложное").node.onclick=function(){var t={difficulty:"hard",optional:{rightAnswers:0,sprint:{rightAnswer:0,falseAnswer:0,used:!1},audioCall:{rightAnswer:0,falseAnswer:0,used:!1}}};n.request.getUserWord(n.element._id).then((function(e){n.request.createUserWordCastom(n.element._id,t,"PUT")})).catch((function(){n.request.createUserWordCastom(n.element._id,t,"POST")})),n.node.classList.add("hard"),n.node.classList.remove("easy")}),new t(o.node,"button","learned","Изученное").node.onclick=function(){n.node.classList.add("easy"),n.node.classList.remove("hard"),n.request.createUserWordCastom(n.element._id,{difficulty:"easy",optional:{rightAnswers:0,sprint:{rightAnswer:0,falseAnswer:0,used:!1},audioCall:{rightAnswer:0,falseAnswer:0,used:!1}}},"POST"),n.request.getLearnedWord().then((function(t){t.learnedWords++;var e={learnedWords:t.learnedWords};n.request.putLearnedWord(e)})),n.request.deleteUserWord(n.element._id)}},n}(t);var f=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const w=function(e){function n(n){var o=e.call(this,n,"div","textbook")||this;o.currentChapter=0,o.currentPage=0,o.currentPageIndex=1,o.request=new s,o.words=new t(o.node,"div","words"),o.itemWrapper=new t(o.words.node,"div","words"),localStorage.getItem("currChapter")?o.getItemWord("".concat(r.url).concat(r.group).concat(localStorage.getItem("currChapter")).concat(r.page).concat(localStorage.getItem("currPage"))):(localStorage.setItem("currChapter","".concat(o.currentChapter)),localStorage.setItem("currPage","".concat(o.currentPage)),o.getItemWord("".concat(r.url).concat(r.group).concat(o.currentChapter).concat(r.page).concat(o.currentPage)));var a=new t(o.node,"div","pagination");o.buttonStart=new t(a.node,"div","button_start none_active","&lt;&lt;"),o.buttonLeft=new t(a.node,"div","button_left none_active","&lt;"),o.buttonActive=new t(a.node,"div","button_active","".concat(o.currentPageIndex)),o.buttonRight=new t(a.node,"div","buttom_right","&gt;"),o.buttonEnd=new t(a.node,"div","buttom_end","&gt;&gt;"),o.buttonRight.node.onclick=function(){o.currentPage<29?(o.currentPage++,o.currentPageIndex++,localStorage.setItem("currPage","".concat(o.currentPage)),o.updatePagginator(),o.getItemWord("".concat(r.url).concat(r.group).concat(o.currentChapter).concat(r.page).concat(o.currentPage))):o.buttonRight.node.classList.add("none_active"),o.currentPage&&(o.buttonStart.node.classList.remove("none_active"),o.buttonLeft.node.classList.remove("none_active"))},o.buttonLeft.node.onclick=function(){o.currentPage&&(o.currentPage--,o.currentPageIndex--,localStorage.setItem("currPage","".concat(o.currentPage)),o.updatePagginator(),o.getItemWord("".concat(r.url).concat(r.group).concat(o.currentChapter).concat(r.page).concat(o.currentPage))),0==o.currentPage&&(o.buttonLeft.node.classList.add("none_active"),o.buttonStart.node.classList.add("none_active"))},o.buttonEnd.node.onclick=function(){o.currentPage=29,o.currentPageIndex=30,localStorage.setItem("currPage","".concat(o.currentPage)),o.updatePagginator(),o.getItemWord("".concat(r.url).concat(r.group).concat(o.currentChapter).concat(r.page).concat(o.currentPage)),o.buttonStart.node.classList.remove("none_active"),o.buttonLeft.node.classList.remove("none_active"),o.buttonRight.node.classList.add("none_active"),o.buttonEnd.node.classList.add("none_active")},o.buttonStart.node.onclick=function(){o.currentPage=0,o.currentPageIndex=1,localStorage.setItem("currPage","".concat(o.currentPage)),o.updatePagginator(),o.getItemWord("".concat(r.url).concat(r.group).concat(o.currentChapter).concat(r.page).concat(o.currentPage)),o.buttonStart.node.classList.add("none_active"),o.buttonLeft.node.classList.add("none_active"),o.buttonRight.node.classList.remove("none_active"),o.buttonEnd.node.classList.remove("none_active")};for(var i=new t(o.node,"div","chapterNmb","Текущий раздел: ".concat(+localStorage.getItem("currChapter")+1)),c=new t(o.node,"div","chapters"),u=function(e){new t(c.node,"div","chapter","Раздел ".concat(e+1)).node.onclick=function(){localStorage.removeItem("hardWord"),o.currentChapter=e,o.currentPage=0,o.currentPageIndex=1,o.buttonStart.node.classList.add("none_active"),o.buttonLeft.node.classList.add("none_active"),o.buttonRight.node.classList.remove("none_active"),o.buttonEnd.node.classList.remove("none_active"),localStorage.setItem("currChapter","".concat(o.currentChapter)),localStorage.setItem("currPage","".concat(o.currentPage)),i.node.textContent="Текущий раздел: ".concat(+localStorage.getItem("currChapter")+1),o.updatePagginator(),o.getItemWord("".concat(r.url).concat(r.group).concat(o.currentChapter).concat(r.page).concat(o.currentPage))}},d=0;d<6;d++)u(d);localStorage.getItem("token")&&(o.chapterHard=new t(c.node,"div","chapter","Сложные слова"),o.chapterHard.node.onclick=function(){localStorage.setItem("hardWord","1"),o.currentPage=0,o.currentPageIndex=1,o.buttonStart.node.classList.add("none_active"),o.buttonLeft.node.classList.add("none_active"),o.buttonRight.node.classList.remove("none_active"),o.buttonEnd.node.classList.remove("none_active"),localStorage.setItem("currPage","".concat(o.currentPage)),o.updatePagginator(),o.request.aggregatedWords(o.currentPage,'{"userWord.difficulty":"hard"}').then((function(t){return t[0].paginatedResults.forEach((function(t){o.card=new p(o.itemWrapper.node,t),o.card.addButtons(!1),o.card.node.style.backgroundColor="#f88585"}))}))});var l=new t(o.node,"div","vertical-arrows"),h=new t(l.node,"button","arrow-up"),f=(new t(h.node,"i","arrow up"),new t(l.node,"button","arrow-down"));return new t(f.node,"i","arrow down"),h.node.onclick=function(){return document.documentElement.scrollTop=0},f.node.onclick=function(){return window.scrollTo(0,document.body.scrollHeight)},o}return f(n,e),n.prototype.updatePagginator=function(){this.itemWrapper.destroy(),this.itemWrapper=new t(this.words.node,"div","words"),this.buttonActive.node.textContent="".concat(this.currentPageIndex)},n.prototype.getItemWord=function(t){var e=this;localStorage.getItem("token")?this.request.aggregatedAllWords(+localStorage.getItem("currPage"),'{"$or":[{"userWord.difficulty":"easy"},{"userWord.difficulty":"hard"},{"userWord.difficulty":"normal"},{"userWord":null}]}',+localStorage.getItem("currChapter")).then((function(t){t[0].paginatedResults.forEach((function(t){t.userWord?"hard"===t.userWord.difficulty?(e.card=new p(e.itemWrapper.node,t),e.card.addButtons(!0),e.card.node.classList.add("hard")):"easy"===t.userWord.difficulty&&(e.card=new p(e.itemWrapper.node,t),e.card.addButtons(!0),e.card.node.classList.add("easy")):(e.card=new p(e.itemWrapper.node,t),e.card.addButtons(!0))}))})):this.getWord(t).then((function(t){t.forEach((function(t){e.card=new p(e.itemWrapper.node,t)}))})).catch((function(){return console.log("Войдите в аккаунт для того, что бы продолжить")}))},n.prototype.getWord=function(t){return e=this,n=void 0,r=function(){return function(t,e){var n,o,r,a,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,o&&(r=2&a[0]?o.return:a[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,a[1])).done)return r;switch(o=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,o=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((r=(r=i.trys).length>0&&r[r.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){i.label=a[1];break}if(6===a[0]&&i.label<r[1]){i.label=r[1],r=a;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(a);break}r[2]&&i.ops.pop(),i.trys.pop();continue}a=e.call(t,i)}catch(t){a=[6,t],o=0}finally{n=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}}(this,(function(e){switch(e.label){case 0:return[4,fetch(t)];case 1:return[2,e.sent().json()]}}))},new((o=void 0)||(o=Promise))((function(t,a){function i(t){try{c(r.next(t))}catch(t){a(t)}}function s(t){try{c(r.throw(t))}catch(t){a(t)}}function c(e){var n;e.done?t(e.value):(n=e.value,n instanceof o?n:new o((function(t){t(n)}))).then(i,s)}c((r=r.apply(e,n||[])).next())}));var e,n,o,r},n}(t);var g=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const v=function(e){function n(n){var o=e.call(this,n)||this;o.game=new t(o.node,"div","game"),o.title=new t(o.game.node,"h2","heading","Игра Аудиовызов"),o.descrioption=new t(o.game.node,"p","descrioption","В игре Аудовызов вы должны выбрать перевод услышанного слова."),o.buttons=new t(o.game.node,"div","chapters");for(var r=localStorage.getItem("token")?7:6,a=function(e){6===e?new t(i.buttons.node,"button","chapter chapter-categories","Сложные слова").node.onclick=function(){return o.onSelect(e)}:new t(i.buttons.node,"button","chapter".concat((e+1).toString()," chapter-categories"),"Раздел ".concat((e+1).toString())).node.onclick=function(){return o.onSelect(e)}},i=this,s=0;s<r;s++)a(s);return o}return g(n,e),n}(t);var m=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const y=function(e){function n(n,o){var r=e.call(this,n)||this;r.game=new t(r.node,"div","game","");var a=new t(r.game.node,"div","voice",""),i=new Audio("https://rss-lang-backends.herokuapp.com/".concat(o.voiceUrl));return a.node.onclick=function(){new Audio("https://rss-lang-backends.herokuapp.com/".concat(o.voiceUrl)).play()},a.node.append(i),r.answersButtons=new t(r.game.node,"div","answers-buttons",""),o.answers.map((function(e,n){new t(r.answersButtons.node,"button","answer-button",e.translate).node.onclick=function(){return r.onAnswer(n)}})),r}return m(n,e),n}(t);var b=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const _=function(e){function n(n,o,r){var a=e.call(this,n)||this;return a.game=new t(a.node,"div","game"),new t(a.game.node,"h2","heading","Сложность игры ".concat(o+1)),new t(a.node,"button","category-button","К выбору категории").node.onclick=function(){return a.onBack()},a.progressIndicator=new t(a.game.node,"p","progress-indicator",""),a.answersIndicator=new t(a.game.node,"div","answers-indicator",""),a.results=[],a.questionCycle(r,0,(function(){a.onFinish(a.results)})),a}return b(n,e),n.prototype.questionCycle=function(t,e,n){var o=this;if(e>=t.length)n();else{this.progressIndicator.node.textContent="".concat(e+1,"-е слово из ").concat(t.length),this.answersIndicator.node.innerHTML=this.results.map((function(t){return t.rightAnswer.translate===t.userAnswer.translate?'<span class="right-answer"></span>':'<span class="false-answer"></span>'})).join(" ");var r=new y(this.node,t[e]);r.onAnswer=function(a){r.destroy(),o.results.push({rightAnswer:{wordId:t[e].answers[t[e].correctAnswerIndex].wordId,word:t[e].answers[t[e].correctAnswerIndex].word,translate:t[e].answers[t[e].correctAnswerIndex].translate,voice:t[e].answers[t[e].correctAnswerIndex].voice},userAnswer:{wordId:t[e].answers[a].wordId,word:t[e].answers[a].word,translate:t[e].answers[a].translate,voice:t[e].answers[a].voice}}),o.questionCycle(t,e+1,n)}}},n}(t);var A=function(t,e,n,o){return new(n||(n=Promise))((function(r,a){function i(t){try{c(o.next(t))}catch(t){a(t)}}function s(t){try{c(o.throw(t))}catch(t){a(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(i,s)}c((o=o.apply(t,e||[])).next())}))},k=function(t,e){var n,o,r,a,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,o&&(r=2&a[0]?o.return:a[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,a[1])).done)return r;switch(o=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,o=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((r=(r=i.trys).length>0&&r[r.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){i.label=a[1];break}if(6===a[0]&&i.label<r[1]){i.label=r[1],r=a;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(a);break}r[2]&&i.ops.pop(),i.trys.pop();continue}a=e.call(t,i)}catch(t){a=[6,t],o=0}finally{n=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}};const I=function(){function t(){this.request=new s}return t.prototype.add=function(t){return A(this,void 0,void 0,(function(){var e,n,o,r;return k(this,(function(a){switch(a.label){case 0:return[4,this.request.getUserWordsData()];case 1:return e=a.sent(),n=e.some((function(t){return t.wordId})),o=e.find((function(e){return e.wordId===t.wordId})),n&&o?"sprint"===t.game?(r={difficulty:t.difficulty,optional:{rightAnswers:t.rightAnswer+o.optional.audioCall.rightAnswer,sprint:{rightAnswer:t.rightAnswer,falseAnswer:t.falseAnswer,used:t.used},audioCall:{rightAnswer:o.optional.audioCall.rightAnswer,falseAnswer:o.optional.audioCall.falseAnswer,used:o.optional.audioCall.used}}},this.createUserWord(t.wordId,r,t.method)):(r={difficulty:t.difficulty,optional:{rightAnswers:t.rightAnswer+o.optional.sprint.rightAnswer,sprint:{rightAnswer:o.optional.sprint.rightAnswer,falseAnswer:o.optional.sprint.falseAnswer,used:o.optional.sprint.used},audioCall:{rightAnswer:t.rightAnswer,falseAnswer:t.falseAnswer,used:t.used}}},this.createUserWord(t.wordId,r,t.method)):"sprint"===t.game?(r={difficulty:t.difficulty,optional:{rightAnswers:t.rightAnswer,sprint:{rightAnswer:t.rightAnswer,falseAnswer:t.falseAnswer,used:t.used},audioCall:{rightAnswer:0,falseAnswer:0,used:!1}}},this.createUserWord(t.wordId,r,t.method)):(r={difficulty:t.difficulty,optional:{rightAnswers:t.rightAnswer,sprint:{rightAnswer:0,falseAnswer:0,used:!1},audioCall:{rightAnswer:t.rightAnswer,falseAnswer:t.falseAnswer,used:t.used}}},this.createUserWord(t.wordId,r,t.method)),[2]}}))}))},t.prototype.createUserWord=function(t,e,n){return A(this,void 0,void 0,(function(){return k(this,(function(o){switch(o.label){case 0:return[4,fetch("".concat(r.shortUrl).concat(r.login,"/").concat(localStorage.getItem("usersId"),"/").concat(r.words,"/").concat(t),{method:n,headers:{Authorization:"Bearer ".concat(window.localStorage.getItem("token")),Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(e)})];case 1:return[2,o.sent().json()]}}))}))},t}();var S=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const W=function(e){function n(n,o){var r=e.call(this,n)||this;r.game=new t(r.node,"div","game"),new t(r.game.node,"h2","heading","Статистика"),r.countRight=0,r.countWrong=0,r.countAnswer=10,r.seriesList=[],r.series=0,r.request=new s,r.results=o,r.adapter=new I,r.newWords=0;var a=new t(r.game.node,"div","result-list","");if(r.resultRight=new t(a.node,"div","result-right",""),new t(r.resultRight.node,"h3","heading","Правильные ответы"),r.resultWrong=new t(a.node,"div","",""),new t(r.resultWrong.node,"h3","heading","Ошибочные ответы"),new t(r.node,"button","category-button","К выбору категории").node.onclick=function(){return r.onCategories("categories")},localStorage.getItem("token"))r.request.getUserWordsData().then((function(e){var n=e.some((function(t){return t.wordId}));o.forEach((function(t,o){var a=new Audio("https://rss-lang-backends.herokuapp.com/".concat(t.rightAnswer.voice)),i=new Audio("https://rss-lang-backends.herokuapp.com/".concat(t.userAnswer.voice));if(n){var s=e.find((function(e){return e.wordId===t.rightAnswer.wordId}));s&&s.optional.audioCall.used?r.checkAnswer(s,t,a,i):r.checkAnswer(null,t,a,i)}else r.checkAnswer(null,t,a,i)}));var a=new t(r.resultRight.node,"div","count-right","Знаю всего: "),i=new t(r.resultWrong.node,"p","count-wrong","Ошибок всего: ");new t(a.node,"span","count-right-number","".concat(r.countRight)),new t(i.node,"span","count-wrong-number","".concat(r.countWrong))})).then((function(){r.saveResults(r.countAnswer,r.countRight)}));else{o.forEach((function(e){if(e.rightAnswer.translate===e.userAnswer.translate){var n=new Audio("https://rss-lang-backends.herokuapp.com/".concat(e.rightAnswer.voice));r.resultRightItem=new t(r.resultRight.node,"p","rightAnswer");var o=new t(r.resultRightItem.node,"span","voice-stat");o.node.onclick=function(){new Audio("https://rss-lang-backends.herokuapp.com/".concat(e.rightAnswer.voice)).play()},new t(r.resultRightItem.node,"span",""," ".concat(e.rightAnswer.word," - ")),new t(r.resultRightItem.node,"span","","".concat(e.rightAnswer.translate)),r.countRight++,o.node.append(n)}})),o.forEach((function(e){if(e.rightAnswer.translate!==e.userAnswer.translate){var n=new Audio("https://rss-lang-backends.herokuapp.com/".concat(e.userAnswer.voice));r.resultWrongItem=new t(r.resultWrong.node,"p","falseAnswer");var o=new t(r.resultWrongItem.node,"span","voice-stat");o.node.onclick=function(){new Audio("https://rss-lang-backends.herokuapp.com/".concat(e.userAnswer.voice)).play()},o.node.append(n),new t(r.resultWrongItem.node,"span",""," ".concat(e.userAnswer.word," - ")),new t(r.resultWrongItem.node,"span","","".concat(e.userAnswer.translate)),r.countWrong++}}));var i=new t(r.resultRight.node,"div","count-right","Знаю всего: "),c=new t(r.resultWrong.node,"p","count-wrong","Ошибок всего: ");new t(i.node,"span","count-right-number","".concat(r.countRight)),new t(c.node,"span","count-wrong-number","".concat(r.countWrong))}return r}return S(n,e),n.prototype.checkAnswer=function(e,n,o,r){if(n.rightAnswer.translate===n.userAnswer.translate){this.updateUserWords(e,n,"easy",1,0),this.resultRightItem=new t(this.resultRight.node,"p","rightAnswer","");var a=new t(this.resultRightItem.node,"span","voice-stat","");a.node.onclick=function(){new Audio("https://rss-lang-backends.herokuapp.com/".concat(n.rightAnswer.voice)).play()},a.node.append(o),new t(this.resultRightItem.node,"span",""," ".concat(n.rightAnswer.word," - ")),new t(this.resultRightItem.node,"span","","".concat(n.rightAnswer.translate)),this.countRight++,this.series+=1}else{this.updateUserWords(e,n,"hard",0,1),this.resultWrongItem=new t(this.resultWrong.node,"p","falseAnswer","");var i=new t(this.resultWrongItem.node,"span","voice-stat","");i.node.onclick=function(){new Audio("https://rss-lang-backends.herokuapp.com/".concat(n.userAnswer.voice)).play()},i.node.append(r),new t(this.resultWrongItem.node,"span",""," ".concat(n.userAnswer.word," - ")),new t(this.resultWrongItem.node,"span","","".concat(n.userAnswer.translate)),this.countWrong++,this.seriesList.push(this.series)}},n.prototype.checkBestSeries=function(t,e){return t>e?t:e},n.prototype.getBestSeries=function(){var t=this.seriesList.sort((function(t,e){return t-e}));return t[t.length-1]},n.prototype.updateUserWords=function(t,e,n,o,r){return a=this,i=void 0,c=function(){var a;return function(t,e){var n,o,r,a,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,o&&(r=2&a[0]?o.return:a[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,a[1])).done)return r;switch(o=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,o=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((r=(r=i.trys).length>0&&r[r.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){i.label=a[1];break}if(6===a[0]&&i.label<r[1]){i.label=r[1],r=a;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(a);break}r[2]&&i.ops.pop(),i.trys.pop();continue}a=e.call(t,i)}catch(t){a=[6,t],o=0}finally{n=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}}(this,(function(i){return t?(a={game:"audioCall",wordId:e.rightAnswer.wordId,difficulty:n,rightAnswer:t.optional.audioCall.rightAnswer+=o,falseAnswer:t.optional.sprint.falseAnswer+=r,used:!0,method:"PUT"},this.adapter.add(a)):(a={game:"audioCall",wordId:e.rightAnswer.wordId,difficulty:n,rightAnswer:o,falseAnswer:r,used:!0,method:"POST"},this.adapter.add(a),this.newWords+=1),[2]}))},new((s=void 0)||(s=Promise))((function(t,e){function n(t){try{r(c.next(t))}catch(t){e(t)}}function o(t){try{r(c.throw(t))}catch(t){e(t)}}function r(e){var r;e.done?t(e.value):(r=e.value,r instanceof s?r:new s((function(t){t(r)}))).then(n,o)}r((c=c.apply(a,i||[])).next())}));var a,i,s,c},n.prototype.saveResults=function(t,e){var n=this;this.request.getStatistic().then((function(o){var r=e+o.learnedWords;(new Date).toLocaleDateString()===o.optional.date?n.request.putStatistic({learnedWords:r,optional:{date:(new Date).toLocaleDateString(),rightAnswers:o.optional.audioCall.rightAnswers?(o.optional.audioCall.rightAnswers+Math.floor(100/(t/e)))/2:Math.floor(100/(t/e)),newWords:o.optional.newWords+n.newWords,sprint:{newWords:o.optional.sprint.newWords,rightAnswers:o.optional.sprint.rightAnswers,series:o.optional.sprint.series},audioCall:{newWords:o.optional.audioCall.newWords?n.newWords+o.optional.audioCall.newWords:n.newWords,rightAnswers:o.optional.audioCall.rightAnswers?(o.optional.audioCall.rightAnswers+Math.floor(100/(t/e)))/2:Math.floor(100/(t/e)),series:n.checkBestSeries(o.optional.audioCall.series,n.getBestSeries())}}}):n.request.putStatistic({learnedWords:r,optional:{date:(new Date).toLocaleDateString(),rightAnswers:t,newWords:n.newWords,audioCall:{newWords:n.newWords,rightAnswers:Math.floor(100/(t/e)),series:n.getBestSeries()},sprint:{newWords:0,rightAnswers:0,series:0}}})}))},n}(t);var C=function(t,e,n,o){return new(n||(n=Promise))((function(r,a){function i(t){try{c(o.next(t))}catch(t){a(t)}}function s(t){try{c(o.throw(t))}catch(t){a(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(i,s)}c((o=o.apply(t,e||[])).next())}))},j=function(t,e){var n,o,r,a,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,o&&(r=2&a[0]?o.return:a[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,a[1])).done)return r;switch(o=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,o=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((r=(r=i.trys).length>0&&r[r.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){i.label=a[1];break}if(6===a[0]&&i.label<r[1]){i.label=r[1],r=a;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(a);break}r[2]&&i.ops.pop(),i.trys.pop();continue}a=e.call(t,i)}catch(t){a=[6,t],o=0}finally{n=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},x=function(){function t(){this.data,this.request=new s}return t.prototype.getQuestions=function(){for(var t=[],e=0;e<10;e++){for(var n=[],o=Math.floor(4*Math.random()),r=this.dataRes[Math.floor(Math.random()*this.dataRes.length)],a={wordId:r.id,word:r.word,translate:r.wordTranslate,voice:r.audio},i=0;i<4;i++)if(o==i)n.push(a);else{var s=this.dataRes[Math.floor(Math.random()*this.dataRes.length)],c={wordId:s.id,word:s.word,translate:s.wordTranslate,voice:s.audio};n.includes(c)||n.push(c)}var u={voiceUrl:r.audio,answers:n,correctAnswerIndex:o};t.push(u)}return t},t.prototype.getQuestionsHard=function(){for(var t=[],e=0;e<10;e++){for(var n=[],o=Math.floor(4*Math.random()),r=this.dataHard[0].paginatedResults[Math.floor(Math.random()*this.dataHard[0].paginatedResults.length)],a={wordId:r._id,word:r.word,translate:r.wordTranslate,voice:r.audio},i=0;i<4;i++)if(o==i)n.push(a);else{var s=this.varWords[Math.floor(Math.random()*this.varWords.length)],c={wordId:s.id,word:s.word,translate:s.wordTranslate,voice:s.audio};n.includes(c)||n.push(c)}var u={voiceUrl:r.audio,answers:n,correctAnswerIndex:o};t.push(u)}return t},t.prototype.build=function(t){return C(this,void 0,void 0,(function(){var e,n;return j(this,(function(o){switch(o.label){case 0:this.dataRes=[],e=0,o.label=1;case 1:return e<30?(n=this,[4,this.getWord(t[e])]):[3,4];case 2:n.data=o.sent(),this.dataRes=this.dataRes.concat(this.data),o.label=3;case 3:return e++,[3,1];case 4:return[2,this]}}))}))},t.prototype.getWord=function(t){return fetch(t).then((function(t){return t.json()}))},t.prototype.buildHard=function(){return C(this,void 0,void 0,(function(){var t,e,n,o;return j(this,(function(a){switch(a.label){case 0:return t=this,[4,this.aggregatedWords()];case 1:for(t.dataHard=a.sent(),e=[],n=0;n<30;n++)e.push("".concat(r.url).concat(r.group).concat(localStorage.getItem("currChapter")).concat(r.page).concat(n));return o=this,[4,this.build(e)];case 2:return[4,a.sent().dataRes];case 3:return o.varWords=a.sent(),[2,[this.dataHard,this.varWords]]}}))}))},t.prototype.aggregatedWords=function(){return C(this,void 0,void 0,(function(){return j(this,(function(t){switch(t.label){case 0:return[4,fetch("".concat(r.shortUrl).concat(r.login,"/").concat(localStorage.getItem("usersId"),"/").concat(r.aggregatedWords,"?").concat(r.page).concat(0,"&").concat(r.wordPerPage,"&").concat(r.filter).concat(encodeURIComponent('{"userWord.difficulty":"hard"}')),{headers:{Authorization:"Bearer ".concat(window.localStorage.getItem("token")),Accept:"application/json","Content-Type":"application/json"}})];case 1:return[2,t.sent().json()]}}))}))},t}(),P=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const O=function(e){function n(t){var n=e.call(this,t,"div","audio-call")||this;return n.getRandome=function(t,e){return Math.round(t-.5+Math.random()*(e-t+1))},n.request=new s,n.mainCycle(),n}return P(n,e),n.prototype.gameCycle=function(e){var n=this;if(this.preloader=new t(this.node,"div","preloader"),6===e)this.model=new x,this.model.buildHard().then((function(t){n.preloader.destroy();var o=new _(n.node,e,n.model.getQuestionsHard());o.onBack=function(){o.destroy(),n.mainCycle()},o.onFinish=function(t){o.destroy();var e=new W(n.node,t);e.onCategories=function(){e.destroy(),n.mainCycle()}}}));else{for(var o=[],a=0;a<30;a++)o.push("".concat(r.url).concat(r.group).concat(e).concat(r.page).concat(a));this.model=new x,this.model.build(o).then((function(t){n.preloader.destroy();var o=new _(n.node,e,n.model.getQuestions());o.onBack=function(){o.destroy(),n.mainCycle()},o.onFinish=function(t){o.destroy();var e=new W(n.node,t);e.onCategories=function(){e.destroy(),n.mainCycle()}}}))}},n.prototype.mainCycle=function(){var t=this,e=new v(this.node);e.onSelect=function(n){e.destroy(),t.gameCycle(n)}},n.prototype.getWord=function(t){return e=this,n=void 0,r=function(){return function(t,e){var n,o,r,a,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,o&&(r=2&a[0]?o.return:a[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,a[1])).done)return r;switch(o=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,o=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((r=(r=i.trys).length>0&&r[r.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){i.label=a[1];break}if(6===a[0]&&i.label<r[1]){i.label=r[1],r=a;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(a);break}r[2]&&i.ops.pop(),i.trys.pop();continue}a=e.call(t,i)}catch(t){a=[6,t],o=0}finally{n=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}}(this,(function(e){switch(e.label){case 0:return[4,fetch(t)];case 1:return[2,e.sent().json()]}}))},new((o=void 0)||(o=Promise))((function(t,a){function i(t){try{c(r.next(t))}catch(t){a(t)}}function s(t){try{c(r.throw(t))}catch(t){a(t)}}function c(e){var n;e.done?t(e.value):(n=e.value,n instanceof o?n:new o((function(t){t(n)}))).then(i,s)}c((r=r.apply(e,n||[])).next())}));var e,n,o,r},n}(t);var U=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const L=function(e){function n(n){var o=e.call(this,n,"div","start-game")||this;o.btnList=[],new t(o.node,"h3","start-game__title","Игра Спринт"),new t(o.node,"p","start-game__text","Закрепляйте изученные слова с помощью мини-игры Спринт."),new t(o.node,"p","start-game__text","Когда Вы выберите уровень сложности начнется игра, где в течении 60 секунд Вам будет представлено слово, и его перевод."),new t(o.node,"p","start-game__text",'Если перевод соответствует нажмите "Верно", иначе - кнопку "Не верно".'),new t(o.node,"p","start-game__text","Наберите как можно больше очков и узнайте какие ответы верные, а какие слова Вам нужно подучить.");for(var r=new t(o.node,"div","skills-container"),a=localStorage.getItem("token")?7:6,i=0;i<a;i+=1)6===i?o.btnList.push(new t(r.node,"button","skill-btn","Сложные слова")):o.btnList.push(new t(r.node,"button","skill-btn-".concat(i),"Уровень ".concat(i+1)));return o.btnList.forEach((function(t,e){t.node.onclick=function(){return o.onStart(e)}})),o}return U(n,e),n}(t);var T=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const B=function(e){function n(t,n){var o=e.call(this,t,"div","timer-container")||this;return o.time=n,o}return T(n,e),n.prototype.on=function(){var e=this,n=new t(this.node,"div","timer minute"),o=(new t(n.node,"div","hand","<span></span>"),new t(n.node,"div","hand","<span></span>"),new t(this.node,"div","face")),r=new t(o.node,"span","timer-count","".concat(this.time));this.tick=setInterval((function(){e.time-=1,r.node.textContent="".concat(e.time),0===e.time&&e.onFinish()}),1e3)},n.prototype.off=function(){clearInterval(this.tick)},n}(t);var R=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const M=function(e){function n(n,o){var r=e.call(this,n,"div","game-field")||this;r.data=o,r.node.setAttribute("id","game-field"),new t(r.node,"button","close-btn").node.onclick=function(){return r.onClose()};var a=new t(r.node,"div","container");if(r.timer=new B(a.node,60),o[0]||o[1]){r.totalTitle=new t(a.node,"h3","total-title","Текущий счёт: "),r.score=new t(r.totalTitle.node,"span","total-title__score","0"),r.scale=new t(r.totalTitle.node,"span","total-title__scale"),r.timer.on(),r.progress=new t(a.node,"div","progress"),r.circles=[];for(var i=0;i<3;i+=1)r.circles.push(new t(r.progress.node,"span","progress__item"))}return r}return R(n,e),n}(t);var E=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const H=function(e){function n(t,n){var o=e.call(this,t,"div","finish-game")||this;return o.results=[],o.score=n,o}return E(n,e),n.prototype.render=function(e){var n=this,o=(new t(this.node,"h3","finish-game__title","Ваш результат: ".concat(this.score," очков")),new t(this.node,"div","wrapper")),r=new t(o.node,"table","results-table"),a=new t(r.node,"tr","table-game-row");new t(a.node,"th","table-column","Номер п/п"),new t(a.node,"th","table-column","Слово"),new t(a.node,"th","table-column","Вариант ответа"),new t(a.node,"th","table-column","Ваш ответ"),new t(a.node,"th","table-column","Правильный ответ"),e.forEach((function(e,n){var o=new t(r.node,"tr","table-game-row");new t(o.node,"td","table-column","".concat(n+1)),new t(o.node,"td","table-column","".concat(e.question)),new t(o.node,"td","table-column","".concat(e.translate)),new t(o.node,"td","table-column","".concat(e.usersAnswer)),new t(o.node,"td","table-column","".concat(e.rightAnswer)),e.result?o.node.classList.add("bg-right-answer"):o.node.classList.add("bg-fail-answer")}));var i=new t(o.node,"div","btns-wrapper");this.btnRestart=new t(i.node,"button","btn-restart","Играть"),this.btnRestart.node.onclick=function(){return n.nextGame()},new t(i.node,"button","btn-exit","Выход").node.onclick=function(){return n.onClose()}},n}(t);var D=function(t,e){return Math.floor(Math.random()*(e-t+1))+t},q=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const z=function(e){function n(n,o){var r=e.call(this,n,"div","question-block")||this;if(o[0]&&o[1]){r.data=o,r.answer=r.data[0].wordTranslate,r.translate=r.data[D(0,1)].wordTranslate,new t(r.node,"h3","question","".concat(r.data[0].word)),new t(r.node,"p","translate","".concat(r.translate));var a=new t(r.node,"div","btns-block"),i=new t(a.node,"button","btn-answer btn-true","Верно"),s=new t(a.node,"button","btn-answer btn-false","Не верно");i.node.onclick=function(){return r.onAnswer(!0)},s.node.onclick=function(){return r.onAnswer(!1)}}else new t(r.node,"h3","question-block__message","Список сложных слов пуст");return r}return q(n,e),n}(t),G=function(){function t(t){this.countAnswer=0,this.gameField=t,this.answers=[],this.rightAnswers=[],this.failAnswers=[],this.newWords=0,this.scale=10,this.series=0,this.seriesList=[]}return t.prototype.addAnswer=function(t,e){e?this.rightAnswers.push(t):this.failAnswers.push(t),this.answers.push(t)},t.prototype.clear=function(){this.answers=[],this.rightAnswers=[],this.failAnswers=[]},t.prototype.getLearnWord=function(){return this.rightAnswers},t.prototype.getBestSeries=function(){var t=this.seriesList.sort((function(t,e){return t-e}));return t[t.length-1]},t.prototype.getHardWord=function(){return this.failAnswers},t.prototype.handle=function(t,e){if("Верно"===t.usersAnswer&&e.answer===e.translate||"Не верно"===t.usersAnswer&&e.answer!==e.translate){t.result=!0;var n=this.gameField.score.node.textContent;this.gameField.score.node.textContent="".concat(+n+this.scale),this.gameField.scale.node.textContent="(+".concat(this.scale," за правильный ответ)"),this.gameField.circles[0].node.classList.contains("passed")?this.gameField.circles[0].node.classList.contains("passed")&&1===this.countAnswer?(this.gameField.circles[1].node.classList.add("passed"),this.countAnswer+=1):this.gameField.circles[1].node.classList.contains("passed")&&2===this.countAnswer?(this.gameField.circles[2].node.classList.add("passed"),this.countAnswer+=1):this.gameField.circles[2].node.classList.contains("passed")&&3===this.countAnswer&&(this.gameField.circles.forEach((function(t){return t.node.classList.remove("passed")})),this.scale*=2,this.countAnswer=0):(this.gameField.circles[0].node.classList.add("passed"),this.countAnswer+=1),this.series+=1,this.seriesList.push(this.series),this.addAnswer(t,!0)}else this.gameField.circles.forEach((function(t){return t.node.classList.remove("passed")})),this.scale=10,this.seriesList.push(this.series),this.series=0,this.countAnswer=0,this.addAnswer(t,!1)},t}();var F=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),N=function(t,e,n,o){return new(n||(n=Promise))((function(r,a){function i(t){try{c(o.next(t))}catch(t){a(t)}}function s(t){try{c(o.throw(t))}catch(t){a(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(i,s)}c((o=o.apply(t,e||[])).next())}))},J=function(t,e){var n,o,r,a,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,o&&(r=2&a[0]?o.return:a[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,a[1])).done)return r;switch(o=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,o=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((r=(r=i.trys).length>0&&r[r.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){i.label=a[1];break}if(6===a[0]&&i.label<r[1]){i.label=r[1],r=a;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(a);break}r[2]&&i.ops.pop(),i.trys.pop();continue}a=e.call(t,i)}catch(t){a=[6,t],o=0}finally{n=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}};const Q=function(t){function e(e){var n=t.call(this,e,"div","sprint-game")||this;return n.counter=0,n.request=new s,n.chapter=localStorage.getItem("currChapter"),n.page=localStorage.getItem("currPage"),n.adapter=new I,n.chapter?n.mainUpdate(n.chapter,n.page):n.mainUpdate(),n}return F(e,t),e.prototype.mainUpdate=function(t,e){var n=this;if(t)this.getData(+t,!0).then((function(o){n.startGame(o,+t,e)}));else{var o=new L(this.node);o.onStart=function(t){o.destroy(),n.getData(t).then((function(e){n.startGame(e,t)}))}}},e.prototype.startGame=function(t,e,n){var o=this,r=new M(this.node,t);this.answersHandler=new G(r),r.timer.onFinish=function(){r.timer.off(),r.destroy();var n=new H(o.node,r.score.node.textContent);n.render(o.answersHandler.answers);var a=o.answersHandler.rightAnswers.length?o.updateUserWords(o.answersHandler.rightAnswers):0,i=o.answersHandler.failAnswers.length?o.updateUserWords(o.answersHandler.failAnswers):0;Promise.all([a,i]).then((function(){return o.saveResults(o.answersHandler.answers.length,o.answersHandler.rightAnswers.length)})).then((function(){return o.answersHandler.clear()})),o.counter=0,n.nextGame=function(){n.destroy(),o.startGame(t,e)},n.onClose=function(){n.destroy(),o.mainUpdate()}},r.onClose=function(){r.destroy(),r.timer.off(),o.mainUpdate()},this.gameCycle(r,t,e,n)},e.prototype.gameCycle=function(t,e,n,o){var r=this,a=new z(t.node,e);document.onkeydown=function(e){"ArrowLeft"===e.key?(r.toHandle(!0,a),r.counter>=r.generalDataLength&&r.endGame(t),r.isTextbook(t,n,o)):"ArrowRight"===e.key&&(r.toHandle(!1,a),r.counter>=r.generalDataLength&&r.endGame(t),r.isTextbook(t,n,o))},a.onAnswer=function(e){r.toHandle(e,a),r.counter>=r.generalDataLength&&r.endGame(t),r.isTextbook(t,n,o)}},e.prototype.endGame=function(t){var e=this;t.timer.off(),t.destroy(),document.onkeydown=null;var n=new H(this.node,t.score.node.textContent);n.render(this.answersHandler.answers),n.btnRestart.destroy();var o=this.answersHandler.rightAnswers.length?this.updateUserWords(this.answersHandler.rightAnswers):0,r=this.answersHandler.failAnswers.length?this.updateUserWords(this.answersHandler.failAnswers):0;Promise.all([o,r]).then((function(){e.saveResults(e.answersHandler.answers.length,e.answersHandler.rightAnswers.length)})).then((function(){return e.answersHandler.clear()})),this.counter=0,n.onClose=function(){n.destroy(),location.hash="textbook"}},e.prototype.saveResults=function(t,e){var n=this;this.request.getStatistic().then((function(o){var r=e+o.learnedWords;(new Date).toLocaleDateString()===o.optional.date?n.request.putStatistic({learnedWords:r,optional:{date:(new Date).toLocaleDateString(),rightAnswers:o.optional.sprint.rightAnswers?Math.floor((o.optional.sprint.rightAnswers+Math.floor(100/(t/e)))/2):Math.floor(100/(t/e)),newWords:o.optional.newWords+n.answersHandler.newWords,sprint:{newWords:o.optional.sprint.newWords?n.answersHandler.newWords+o.optional.sprint.newWords:n.answersHandler.newWords,rightAnswers:o.optional.sprint.rightAnswers?Math.floor((o.optional.sprint.rightAnswers+Math.floor(100/(t/e)))/2):Math.floor(100/(t/e)),series:n.checkBestSeries(o.optional.sprint.series,n.answersHandler.getBestSeries())},audioCall:{newWords:o.optional.audioCall.newWords,rightAnswers:o.optional.audioCall.rightAnswers,series:o.optional.audioCall.series}}}):n.request.putStatistic({learnedWords:r,optional:{date:(new Date).toLocaleDateString(),rightAnswers:t,newWords:n.answersHandler.newWords,sprint:{newWords:n.answersHandler.newWords,rightAnswers:Math.floor(100/(t/e)),series:n.answersHandler.getBestSeries()},audioCall:{newWords:0,rightAnswers:0,series:0}}})}))},e.prototype.checkBestSeries=function(t,e){return t>e?t:e},e.prototype.toHandle=function(t,e){var n=this.getStatData(t,e);this.answersHandler.handle(n,e),e.destroy()},e.prototype.isTextbook=function(t,e,n){var o=this;n?this.getData(e,!0).then((function(r){return o.gameCycle(t,r,e,n)})):this.getData(e).then((function(n){return o.gameCycle(t,n,e)}))},e.prototype.getStatData=function(t,e){return{id:e.data[0].id||e.data[0]._id,group:e.data[0].group,page:e.data[0].page,question:e.data[0].word,rightAnswer:e.data[0].wordTranslate,translate:e.translate,usersAnswer:t?"Верно":"Не верно",result:!1}},e.prototype.getData=function(t,e){return N(this,void 0,void 0,(function(){var n,o,r,a,i,s,c,u,d,l,h,p;return J(this,(function(f){switch(f.label){case 0:return f.trys.push([0,8,,9]),e?localStorage.getItem("hardWord")?[4,this.request.aggregatedWords(0,'{"userWord.difficulty":"hard"}')]:[3,2]:[3,4];case 1:return n=f.sent(),this.generalDataLength=n[0].paginatedResults.length,o=n[0].paginatedResults[D(0,n[0].paginatedResults.length-1)],r=n[0].paginatedResults[D(0,n[0].paginatedResults.length-1)],[2,[o,r]];case 2:return[4,this.getWords(+this.chapter,this.page)];case 3:return a=f.sent(),this.generalDataLength=a.length,i=a[this.counter],s=a[D(0,19)],this.counter+=1,[2,[i,s]];case 4:return t&&6!==t||0===t?[4,this.getWords(t)]:[3,6];case 5:return c=f.sent(),this.generalDataLength=c.length,u=c[D(0,19)],d=c[D(0,19)],[2,[u,d]];case 6:return[4,this.request.aggregatedWords(0,'{"userWord.difficulty":"hard"}')];case 7:return l=f.sent(),this.generalDataLength=l[0].paginatedResults.length,h=l[0].paginatedResults[this.counter],this.counter+=1,p=l[0].paginatedResults[D(0,l[0].paginatedResults.length-1)],[2,[h,p]];case 8:return f.sent(),console.log("Возможно список сложных слов пуст"),[3,9];case 9:return[2]}}))}))},e.prototype.updateUserWords=function(t){return N(this,void 0,void 0,(function(){var e,n,o,r,a,i;return J(this,(function(s){switch(s.label){case 0:return[4,this.getUserWordsData()];case 1:if(e=s.sent(),t[0].result)for(n=function(n){var r=e.find((function(e){return e.wordId===t[n].id}));if(r)r.optional.sprint.used?(a={game:"sprint",wordId:r.wordId,difficulty:"easy",rightAnswer:r.optional.sprint.rightAnswer+=1,falseAnswer:r.optional.sprint.falseAnswer,used:!0,method:"PUT"},o.adapter.add(a)):(a={game:"sprint",wordId:t[n].id,difficulty:"normal",rightAnswer:1,falseAnswer:0,used:!0,method:"PUT"},o.adapter.add(a),o.answersHandler.newWords+=1);else{var a={game:"sprint",wordId:t[n].id,difficulty:"normal",rightAnswer:1,falseAnswer:0,used:!0,method:"POST"};o.adapter.add(a),o.answersHandler.newWords+=1}},o=this,i=0;i<t.length;i+=1)n(i);else for(r=function(n){var o=e.find((function(e){return e.wordId===t[n].id}));if(o)o.optional.sprint.used?(r={game:"sprint",wordId:o.wordId,difficulty:+o.optional.sprint.falseAnswer>+o.optional.sprint.rightAnswer?"hard":"normal",rightAnswer:o.optional.sprint.rightAnswer,falseAnswer:o.optional.sprint.falseAnswer+=1,used:!0,method:"PUT"},a.adapter.add(r)):(r={game:"sprint",wordId:t[n].id,difficulty:"normal",rightAnswer:0,falseAnswer:1,used:!0,method:"PUT"},a.adapter.add(r),a.answersHandler.newWords+=1);else{var r={game:"sprint",wordId:t[n].id,difficulty:"normal",rightAnswer:0,falseAnswer:1,used:!0,method:"POST"};a.adapter.add(r),a.answersHandler.newWords+=1}},a=this,i=0;i<t.length;i+=1)r(i);return[2,t]}}))}))},e.prototype.getWords=function(t,e){return N(this,void 0,void 0,(function(){var n;return J(this,(function(o){switch(o.label){case 0:return n=e||D(0,29),[4,fetch("".concat(r.url).concat(r.group).concat(t).concat(r.page).concat(n))];case 1:return[2,o.sent().json()]}}))}))},e.prototype.getUserWordsData=function(){return N(this,void 0,void 0,(function(){return J(this,(function(t){switch(t.label){case 0:return[4,fetch("".concat(r.shortUrl).concat(r.login,"/").concat(localStorage.getItem("usersId"),"/").concat(r.words),{headers:{Authorization:"Bearer ".concat(window.localStorage.getItem("token")),Accept:"application/json","Content-Type":"application/json"}})];case 1:return[2,t.sent().json()]}}))}))},e.prototype.getUserWords=function(){return N(this,void 0,void 0,(function(){var t,e,n,o=this;return J(this,(function(a){switch(a.label){case 0:return[4,this.getUserWordsData()];case 1:return t=a.sent(),e=t.map((function(t){return N(o,void 0,void 0,(function(){return J(this,(function(e){switch(e.label){case 0:return[4,fetch("".concat(r.shortUrl).concat(r.words,"/").concat(t.wordId))];case 1:return[2,e.sent().json()]}}))}))})),n=e.map((function(t){return N(o,void 0,void 0,(function(){return J(this,(function(e){switch(e.label){case 0:return[4,t];case 1:return[2,e.sent()]}}))}))})),[2,n]}}))}))},e.prototype.getLearnedWord=function(){return N(this,void 0,void 0,(function(){return J(this,(function(t){switch(t.label){case 0:return[4,fetch("".concat(r.shortUrl).concat(r.login,"/").concat(localStorage.getItem("usersId"),"/").concat(r.stat),{headers:{Authorization:"Bearer ".concat(window.localStorage.getItem("token")),Accept:"application/json","Content-Type":"application/json"}})];case 1:return[2,t.sent().json()]}}))}))},e.prototype.putLearnedWord=function(t){return N(this,void 0,void 0,(function(){return J(this,(function(e){switch(e.label){case 0:return[4,fetch("".concat(r.shortUrl).concat(r.login,"/").concat(localStorage.getItem("usersId"),"/").concat(r.stat),{method:"PUT",headers:{Authorization:"Bearer ".concat(window.localStorage.getItem("token")),Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(t)})];case 1:return[2,e.sent().json()]}}))}))},e.prototype.createUserWord=function(t,e,n){return N(this,void 0,void 0,(function(){return J(this,(function(o){switch(o.label){case 0:return[4,fetch("".concat(r.shortUrl).concat(r.login,"/").concat(localStorage.getItem("usersId"),"/").concat(r.words,"/").concat(t),{method:n,headers:{Authorization:"Bearer ".concat(window.localStorage.getItem("token")),Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(e)})];case 1:return[2,o.sent().json()]}}))}))},e}(t);const K=function(){function e(){}return e.prototype.render=function(e){var n=this,o=new t(e,"div","authorization"),r=new t(o.node,"form","form");this.title=new t(r.node,"h3","title","Bведите адрес электронной почты и пароль");var a=document.createElement("input");a.className="input",a.setAttribute("type","email"),a.setAttribute("placeholder","Email");var i=document.createElement("input");i.className="input",i.setAttribute("type","password"),i.setAttribute("placeholder","Password"),i.setAttribute("autocomplete","off"),r.node.append(a,i),a.oninput=function(){n.inputsData.email=a.value},i.oninput=function(){n.inputsData.password=i.value};var s=new t(r.node,"button","login","Регистрация");s.node.setAttribute("type","button");var c=new t(r.node,"button","signin","Войти");return c.node.setAttribute("type","button"),this.inputsData={email:a.value,password:i.value},s.node.onclick=function(){if(!n.inputsData.email||!n.inputsData.password){var e=new t(r.node,"span","message","Пожалуйста введите ваш email и пароль");setTimeout((function(){return e.destroy()}),5e3)}if(n.inputsData.password.length<8){var o=new t(r.node,"span","message","Пароль должен содержать минимум 8 символов");setTimeout((function(){return o.destroy()}),5e3)}n.onLogin(n.inputsData),n.title.node.textContent="Ваша учетная запись создана, теперь можете войти",s.destroy()},c.node.onclick=function(){n.onSignin(n.inputsData)},o.node},e.prototype.addOrGetUser=function(t,e){return n=this,o=void 0,a=function(){return function(t,e){var n,o,r,a,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,o&&(r=2&a[0]?o.return:a[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,a[1])).done)return r;switch(o=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,o=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((r=(r=i.trys).length>0&&r[r.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){i.label=a[1];break}if(6===a[0]&&i.label<r[1]){i.label=r[1],r=a;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(a);break}r[2]&&i.ops.pop(),i.trys.pop();continue}a=e.call(t,i)}catch(t){a=[6,t],o=0}finally{n=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}}(this,(function(n){switch(n.label){case 0:return[4,fetch(e,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(t)})];case 1:return[2,n.sent()]}}))},new((r=void 0)||(r=Promise))((function(t,e){function i(t){try{c(a.next(t))}catch(t){e(t)}}function s(t){try{c(a.throw(t))}catch(t){e(t)}}function c(e){var n;e.done?t(e.value):(n=e.value,n instanceof r?n:new r((function(t){t(n)}))).then(i,s)}c((a=a.apply(n,o||[])).next())}));var n,o,r,a},e.prototype.checkUser=function(t,e,n,o){window.localStorage.getItem("token")&&fetch("".concat(r.shortUrl).concat(r.login,"/").concat(window.localStorage.getItem("usersId")),{headers:{Authorization:"Bearer ".concat(window.localStorage.getItem("token")),Accept:"application/json","Content-Type":"application/json"}}).then((function(t){return t.json()})).then((function(t){return t})).then((function(o){t.node.classList.add("hidden"),"#textbook"===location.hash?n.node.classList.add("hidden"):n.node.classList.remove("hidden"),e.node.onclick=function(){n.node.classList.add("hidden"),t.node.classList.remove("hidden"),window.localStorage.removeItem("usersId"),window.localStorage.removeItem("token")}})).catch((function(){return console.log("Вы не зарегистрированы")}))},e}();var $=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const V=function(e){function n(n){var o=e.call(this,n,"div","statistic")||this;return o.request=new s,o.request.getStatistic().then((function(e){new t(o.node,"h2","heading","Статистика");var n=new t(o.node,"div","statistics-simple"),r=new t(n.node,"div","staistics__games statistics__item"),a=(new t(r.node,"h3","","Статистика по словам"),new t(r.node,"table","staistics__games-table")),i=new t(a.node,"tr","table-row"),s=(new t(i.node,"td","table-column-title","Количество новых слов за день"),new t(i.node,"td","table-column-value","".concat(e.optional.newWords)),new t(a.node,"tr","table-row")),c=(new t(s.node,"td","table-column-title","Процент правильных ответов"),new t(s.node,"td","table-column-value","".concat(e.optional.rightAnswers,"%")),new t(a.node,"tr","table-row"));new t(c.node,"td","table-column-title","Количество изученных слов за день"),o.request.aggregatedUserWords('{"userWord.difficulty":"easy"}').then((function(e){return new t(c.node,"td","table-column-value","".concat(e[0].totalCount.length?e[0].totalCount[0].count:0))}));var u=new t(n.node,"div","staistics__words statistics__item"),d=(new t(u.node,"h3","","Статистика по игре Спринт"),new t(u.node,"table","staistics__games-table")),l=new t(d.node,"tr","table-row"),h=(new t(l.node,"td","table-column-title","Количество новых слов за день"),new t(l.node,"td","table-column-value","".concat(e.optional.sprint.newWords)),new t(d.node,"tr","table-row")),p=(new t(h.node,"td","table-column-title","Процент правильных ответов"),new t(h.node,"td","table-column-value","".concat(e.optional.sprint.rightAnswers,"%")),new t(d.node,"tr","table-row")),f=(new t(p.node,"td","table-column-title","Лучшая серия правильных ответов"),new t(p.node,"td","table-column-value","".concat(e.optional.sprint.series)),new t(o.node,"div","statistics-term"),new t(n.node,"div","staistics__games statistics__item")),w=(new t(f.node,"h3","","Статистика по игре Аудиовызов"),new t(f.node,"table","staistics__games-table")),g=new t(w.node,"tr","table-row"),v=(new t(g.node,"td","table-column-title","Количество новых слов за день"),new t(g.node,"td","table-column-value","".concat(e.optional.audioCall.newWords)),new t(w.node,"tr","table-row")),m=(new t(v.node,"td","table-column-title","Процент правильных ответов"),new t(v.node,"td","table-column-value","".concat(e.optional.audioCall.rightAnswers,"%")),new t(w.node,"tr","table-row"));new t(m.node,"td","table-column-title","Лучшая серия правильных ответов"),new t(m.node,"td","table-column-value","".concat(e.optional.audioCall.series))})),o}return $(n,e),n}(t);var X=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();new(function(e){function n(n){var r=e.call(this,null)||this;return r.header=new u(n),r.header.node.setAttribute("id","header"),r.root=new t(n,"div","root"),r.wrapperMain=new t(r.root.node,"div","wrapper-main"),r.footer=new l(n),r.footer.node.setAttribute("id","footer"),r.main=new o(r.wrapperMain.node),r.reqest=new s,r.auth=new K,r.auth.checkUser(r.header.authorizationBtn,r.header.authUser,r.header.userMenu,r.header.statisticBtn),r.main.bgGold.node.onclick=function(){location.hash=r.header.textBookBtn.node.id,r.auth.checkUser(r.header.authorizationBtn,r.header.authUser,r.header.userMenu),r.header.userMenu.node.classList.add("hidden")},r.header.mainBtn.node.onclick=function(){location.hash=r.header.mainBtn.node.id,r.auth.checkUser(r.header.authorizationBtn,r.header.authUser,r.header.userMenu)},r.header.textBookBtn.node.onclick=function(){location.hash=r.header.textBookBtn.node.id,r.auth.checkUser(r.header.authorizationBtn,r.header.authUser,r.header.userMenu),r.header.userMenu.node.classList.add("hidden")},r.header.audioCallBtn.node.onclick=function(){location.hash=r.header.audioCallBtn.node.id,r.auth.checkUser(r.header.authorizationBtn,r.header.authUser,r.header.userMenu)},r.header.sprintBtn.node.onclick=function(){"#textbook"===location.hash?location.hash=r.header.sprintBtn.node.id:(location.hash=r.header.sprintBtn.node.id,localStorage.removeItem("currChapter"),localStorage.removeItem("currPage"))},r.header.statisticBtn.node.onclick=function(){location.hash=r.header.statisticBtn.node.id},r.header.authorizationBtn.node.onclick=function(){location.hash=r.header.authorizationBtn.node.id},r}return X(n,e),n.prototype.handleRoute=function(){var e=this,n=document.location.hash?document.location.hash.slice(1):"";if(this.header.updateAuth(),n&&"main"===n&&(this.footer.destroy(),this.wrapperMain.destroy(),this.wrapperMain=new t(this.root.node,"div","wrapper-main"),new o(this.wrapperMain.node).bgGold.node.onclick=function(){location.hash=e.header.textBookBtn.node.id,e.auth.checkUser(e.header.authorizationBtn,e.header.authUser,e.header.userMenu),e.header.userMenu.node.classList.add("hidden")},this.footer=new l(document.body)),n&&"textbook"===n&&(this.footer.destroy(),this.wrapperMain.destroy(),localStorage.removeItem("hardWord"),this.wrapperMain=new t(this.root.node,"div","wrapper-main"),new w(this.wrapperMain.node),this.footer=new l(document.body)),n&&"audio-call"===n&&(this.wrapperMain.destroy(),this.wrapperMain=new t(this.root.node,"div","wrapper-main"),new O(this.wrapperMain.node),this.footer.destroy()),n&&"sprint"===n&&(this.wrapperMain.destroy(),this.wrapperMain=new t(this.root.node,"div","wrapper-main"),new Q(this.wrapperMain.node),this.footer.destroy()),n&&"statistic"===n&&(this.footer.destroy(),this.wrapperMain.destroy(),this.wrapperMain=new t(this.root.node,"div","wrapper-main"),new V(this.wrapperMain.node),this.footer=new l(document.body)),n&&"authorization"===n){this.footer.destroy();var a=this.auth.render(this.wrapperMain.node);this.wrapperMain.node.replaceChild(a,this.wrapperMain.node.childNodes[0]),this.auth.onLogin=function(t){e.auth.addOrGetUser(t,"".concat(r.shortUrl).concat(r.login))},this.auth.onSignin=function(n){e.header.statisticBtn.node.classList.remove("hidden"),e.auth.addOrGetUser(n,"".concat(r.shortUrl).concat(r.signin)).then((function(t){return t.json()})).then((function(t){window.localStorage.setItem("token","".concat(t.token)),window.localStorage.setItem("usersId","".concat(t.userId))})).then((function(){e.checkStat()})).then((function(){e.auth.checkUser(e.header.authorizationBtn,e.header.authUser,e.header.userMenu,e.header.statisticBtn)})).then((function(){e.wrapperMain.destroy(),location.hash="main"})).catch((function(){var e=new t(a,"span","message","Неверный пароль.");setTimeout((function(){return e.destroy()}),5e3)}))},this.footer=new l(document.body)}},n.prototype.checkStat=function(){return t=this,e=void 0,o=function(){return function(t,e){var n,o,r,a,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,o&&(r=2&a[0]?o.return:a[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,a[1])).done)return r;switch(o=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,o=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((r=(r=i.trys).length>0&&r[r.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){i.label=a[1];break}if(6===a[0]&&i.label<r[1]){i.label=r[1],r=a;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(a);break}r[2]&&i.ops.pop(),i.trys.pop();continue}a=e.call(t,i)}catch(t){a=[6,t],o=0}finally{n=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}}(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,4]),[4,this.reqest.getStatistic()];case 1:case 3:return t.sent(),[3,4];case 2:return t.sent(),[4,this.reqest.putStatistic({learnedWords:0,optional:{date:(new Date).toLocaleDateString(),newWords:0,learnedWords:0,rightAnswers:0,sprint:{newWords:0,rightAnswers:0,series:0},audioCall:{newWords:0,rightAnswers:0,series:0}}})];case 4:return[2]}}))},new((n=void 0)||(n=Promise))((function(r,a){function i(t){try{c(o.next(t))}catch(t){a(t)}}function s(t){try{c(o.throw(t))}catch(t){a(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(i,s)}c((o=o.apply(t,e||[])).next())}));var t,e,n,o},n.prototype.initRouter=function(){addEventListener("hashchange",this.handleRoute.bind(this)),this.handleRoute()},n}(t))(document.body).initRouter()})();